<Application x:Class="AssetProcessor.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:AssetProcessor">
    <Application.Resources>
        <!-- Default placeholder brushes (will be replaced by ThemeHelper on startup) -->
        <SolidColorBrush x:Key="ThemeBackground" Color="White"/>
        <SolidColorBrush x:Key="ThemeBackgroundAlt" Color="#FFF0F0F0"/>
        <SolidColorBrush x:Key="ThemeBackgroundHover" Color="#FFBEE6FD"/>
        <SolidColorBrush x:Key="ThemeForeground" Color="Black"/>
        <SolidColorBrush x:Key="ThemeForegroundDim" Color="#FF606060"/>
        <SolidColorBrush x:Key="ThemeBorder" Color="#FFACACAC"/>
        <SolidColorBrush x:Key="ThemeBorderHover" Color="#FF7EB4EA"/>
        <SolidColorBrush x:Key="ThemeAccent" Color="#FF0078D7"/>
        <SolidColorBrush x:Key="ThemeAccentForeground" Color="White"/>
        <SolidColorBrush x:Key="ThemeSelection" Color="#FF0078D7"/>
        <SolidColorBrush x:Key="ThemeSelectionForeground" Color="White"/>
        <SolidColorBrush x:Key="ThemeDataGridBackground" Color="#FFD6D6D6"/>
        <SolidColorBrush x:Key="ThemeDataGridRowBackground" Color="White"/>
        <SolidColorBrush x:Key="ThemeDataGridRowAltBackground" Color="#FFF0F0F0"/>
        <SolidColorBrush x:Key="ThemeDataGridGridLines" Color="#FFD3D3D3"/>

        <Style TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="CanUserSortColumns" Value="True"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="FontSize" Value="9"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="{DynamicResource ThemeDataGridBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource ThemeDataGridGridLines}"/>
            <Setter Property="VerticalGridLinesBrush" Value="{DynamicResource ThemeDataGridGridLines}"/>
            <Setter Property="RowBackground" Value="{DynamicResource ThemeDataGridRowBackground}"/>
            <Setter Property="AlternatingRowBackground" Value="{DynamicResource ThemeDataGridRowAltBackground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- DataGrid Cell -->
        <Style TargetType="DataGridCell">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="2"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeAccentForeground}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- DataGrid Row -->
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="{DynamicResource ThemeDataGridRowBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Style.Triggers>
                <Trigger Property="AlternationIndex" Value="1">
                    <Setter Property="Background" Value="{DynamicResource ThemeDataGridRowAltBackground}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeAccentForeground}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeBackgroundHover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- DataGrid Column Header -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{DynamicResource ThemeBackgroundAlt}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="Padding" Value="4,2"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- DataGrid Row Header -->
        <Style TargetType="DataGridRowHeader">
            <Setter Property="Background" Value="{DynamicResource ThemeBackgroundAlt}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- ComboBox theme-aware styling -->
        <ControlTemplate x:Key="ComboBoxTemplate" TargetType="{x:Type ComboBox}">
            <Grid x:Name="templateRoot" SnapsToDevicePixels="true">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                </Grid.ColumnDefinitions>
                <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2"
                       IsOpen="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                       Margin="1" Placement="Bottom"
                       PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}">
                    <Border x:Name="dropDownBorder"
                            Background="{DynamicResource ThemeBackground}"
                            BorderBrush="{DynamicResource ThemeBorder}"
                            BorderThickness="1"
                            MaxHeight="{TemplateBinding MaxDropDownHeight}"
                            MinWidth="{Binding ActualWidth, ElementName=templateRoot}">
                        <ScrollViewer x:Name="DropDownScrollViewer">
                            <Grid x:Name="grid" RenderOptions.ClearTypeHint="Enabled">
                                <Canvas x:Name="canvas" HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                    <Rectangle x:Name="opaqueRect"
                                               Fill="{Binding Background, ElementName=dropDownBorder}"
                                               Height="{Binding ActualHeight, ElementName=dropDownBorder}"
                                               Width="{Binding ActualWidth, ElementName=dropDownBorder}"/>
                                </Canvas>
                                <ItemsPresenter x:Name="ItemsPresenter"
                                                KeyboardNavigation.DirectionalNavigation="Contained"
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </Popup>
                <ToggleButton x:Name="toggleButton"
                              Background="{TemplateBinding Background}"
                              BorderBrush="{TemplateBinding BorderBrush}"
                              BorderThickness="{TemplateBinding BorderThickness}"
                              Grid.ColumnSpan="2"
                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                    <ToggleButton.Style>
                        <Style TargetType="{x:Type ToggleButton}">
                            <Setter Property="OverridesDefaultStyle" Value="true"/>
                            <Setter Property="IsTabStop" Value="false"/>
                            <Setter Property="Focusable" Value="false"/>
                            <Setter Property="ClickMode" Value="Press"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                                        <Border x:Name="templateRoot"
                                                Background="{DynamicResource ThemeBackground}"
                                                BorderBrush="{DynamicResource ThemeBorder}"
                                                BorderThickness="1"
                                                SnapsToDevicePixels="true">
                                            <Border x:Name="splitBorder" BorderBrush="Transparent" BorderThickness="1" HorizontalAlignment="Right" Margin="0" SnapsToDevicePixels="true" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                                                <Path x:Name="arrow" Data="F1 M 0,0 L 2.667,2.66665 L 5.3334,0 L 5.3334,-1.78168 L 2.6667,0.88501 L0,-1.78168 L0,0 Z" Fill="{DynamicResource ThemeForegroundDim}" HorizontalAlignment="Center" Margin="0" VerticalAlignment="Center"/>
                                            </Border>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="true">
                                                <Setter Property="Background" TargetName="templateRoot" Value="{DynamicResource ThemeBackgroundHover}"/>
                                                <Setter Property="BorderBrush" TargetName="templateRoot" Value="{DynamicResource ThemeBorderHover}"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
                <ContentPresenter x:Name="contentPresenter"
                                  ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                  Content="{TemplateBinding SelectionBoxItem}"
                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  IsHitTestVisible="false"
                                  Margin="{TemplateBinding Padding}"
                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </Grid>
        </ControlTemplate>

        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,3,5,3"/>
            <Setter Property="Template" Value="{StaticResource ComboBoxTemplate}"/>
        </Style>

        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="Padding" Value="4,2"/>
            <Style.Triggers>
                <Trigger Property="IsHighlighted" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeAccentForeground}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeAccentForeground}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ListBox theme-aware styling -->
        <Style TargetType="ListBoxItem">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ThemeAccent}"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeAccentForeground}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="ListBox">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- TextBox theme-aware styling -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="CaretBrush" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- Button theme-aware styling -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource ThemeBackgroundAlt}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- CheckBox theme-aware styling -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- Label theme-aware styling -->
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- TextBlock theme-aware styling -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- GroupBox theme-aware styling -->
        <Style TargetType="GroupBox">
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- Expander theme-aware styling -->
        <Style TargetType="Expander">
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- TabControl theme-aware styling -->
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <Style TargetType="TabItem">
            <Setter Property="Background" Value="{DynamicResource ThemeBackgroundAlt}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- ToolBar theme-aware styling -->
        <Style TargetType="ToolBar">
            <Setter Property="Background" Value="{DynamicResource ThemeBackgroundAlt}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- Menu theme-aware styling -->
        <Style TargetType="Menu">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <Style TargetType="MenuItem">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>

        <!-- ContextMenu theme-aware styling -->
        <Style TargetType="ContextMenu">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
        </Style>

        <!-- ScrollViewer theme-aware styling -->
        <Style TargetType="ScrollViewer">
            <Setter Property="Background" Value="Transparent"/>
        </Style>

        <!-- Slider - keep default for visibility -->
    </Application.Resources>
</Application>
