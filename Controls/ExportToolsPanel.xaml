<UserControl x:Class="AssetProcessor.Controls.ExportToolsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="100" d:DesignWidth="600">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <GroupBox Header="Asset Export" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="2">
        <StackPanel Orientation="Vertical" Margin="4,2,4,2">
            <!-- Marked assets count -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                <TextBlock Text="Marked:" VerticalAlignment="Center" Margin="0,0,5,0" FontWeight="Bold"/>
                <TextBlock Text="{Binding MarkedModelsCount}" VerticalAlignment="Center" Foreground="#FF2196F3" FontWeight="Bold"/>
                <TextBlock Text=" models," VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBlock Text="{Binding MarkedMaterialsCount}" VerticalAlignment="Center" Foreground="#FF4CAF50" FontWeight="Bold"/>
                <TextBlock Text=" materials," VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBlock Text="{Binding MarkedTexturesCount}" VerticalAlignment="Center" Foreground="#FF9C27B0" FontWeight="Bold"/>
                <TextBlock Text=" textures" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Export Action Buttons -->
            <StackPanel Orientation="Horizontal" Margin="0,2,0,2">
                <Button x:Name="SelectRelatedButton" Content="Select" Width="50" Margin="0,0,3,0"
                        Background="#FF4CAF50" Foreground="White" FontWeight="Bold"
                        ToolTip="Mark selected assets and their related dependencies for export"/>

                <Button x:Name="ClearExportMarksButton" Content="Clear" Width="40" Margin="0,0,3,0"
                        ToolTip="Clear all export marks"/>

                <Button x:Name="ExportAssetsButton" Content="{Binding ExportButtonContent}" IsEnabled="{Binding IsExportEnabled}" Width="50" Margin="0,0,3,0"
                        Background="#FF2196F3" Foreground="White" FontWeight="Bold"
                        ToolTip="Export all marked assets to server format"/>

                <Button x:Name="UploadToCloudButton" Content="{Binding UploadToCloudButtonContent}" IsEnabled="{Binding IsUploadToCloudEnabled}" Width="50" Margin="0,0,3,0"
                        Background="#FF9C27B0" Foreground="White" FontWeight="Bold"
                        ToolTip="Upload exported assets to cloud storage"/>

                <CheckBox Content="ORM" VerticalAlignment="Center" Margin="5,0,3,0"
                          IsChecked="{Binding IsGenerateOrmChecked, Mode=TwoWay}"
                          ToolTip="Generate ORM packed textures (AO+Gloss+Metallic)"/>

                <CheckBox Content="LODs" VerticalAlignment="Center" Margin="0,0,3,0"
                          IsChecked="{Binding IsGenerateLodsChecked, Mode=TwoWay}"
                          ToolTip="Generate LOD chain for models"/>

                <CheckBox Content="Auto" VerticalAlignment="Center" Margin="0,0,0,0"
                          IsChecked="{Binding IsAutoUploadEnabled, Mode=TwoWay}"
                          ToolTip="Automatically upload assets after export"/>
            </StackPanel>

            <!-- Texture Tools Row - Only visible for Textures tab -->
            <StackPanel x:Name="TextureToolsPanel" Orientation="Horizontal" Margin="0,2,0,0" Visibility="{Binding IsTextureToolsVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                <TextBlock Text="Tools:" VerticalAlignment="Center" Margin="0,0,5,0" FontWeight="Bold" Foreground="Gray"/>

                <Button x:Name="ProcessTexturesButton" Content="Process" Width="55" Margin="0,0,3,0"
                        Command="{Binding ProcessTexturesCommand}"
                        ToolTip="Convert selected textures to KTX2 format"/>

                <Button x:Name="AutoDetectAllButton" Content="Detect" Width="50" Margin="0,0,3,0"
                        Command="{Binding AutoDetectPresetsCommand}"
                        ToolTip="Automatically detect presets for textures based on filenames"/>

                <Button x:Name="CreateORMButton" Content="ORM" Width="40" Margin="0,0,3,0"
                        Background="#FF4CAF50" Foreground="White" FontWeight="Bold"
                        ToolTip="Create virtual ORM texture for channel packing"/>

                <Button x:Name="UploadTexturesButton" Content="{Binding UploadTexturesButtonContent}" IsEnabled="{Binding IsUploadTexturesEnabled}" Width="50" Margin="0,0,3,0"
                        ToolTip="Upload processed textures to cloud storage"/>

                <CheckBox x:Name="ProcessAllCheckBox" Content="All" VerticalAlignment="Center" Margin="5,0,0,0"
                          ToolTip="Process all textures instead of just selected ones"
                          IsChecked="{Binding ProcessAllTextures, Mode=TwoWay}"/>
            </StackPanel>
        </StackPanel>
    </GroupBox>
</UserControl>
