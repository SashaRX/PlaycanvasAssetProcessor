<Window x:Class="AssetProcessor.TextureViewer.D3D11TestWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:AssetProcessor.TextureViewer"
        Title="D3D11 Texture Viewer Test" Height="600" Width="800"
        Loaded="Window_Loaded"
        KeyDown="Window_KeyDown">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Controls -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
            <Button x:Name="LoadPngButton" Content="Load PNG" Width="100" Margin="5" Click="LoadPngButton_Click"/>
            <Button x:Name="LoadKtx2Button" Content="Load KTX2" Width="100" Margin="5" Click="LoadKtx2Button_Click"/>
            <TextBlock x:Name="StatusText" VerticalAlignment="Center" Margin="10,0"/>
        </StackPanel>

        <!-- D3D11 Viewer -->
        <Border Grid.Row="1" Background="#FF333333" Margin="5" x:Name="ViewerBorder">
            <Grid>
                <local:D3D11TextureViewerControl x:Name="TextureViewer" />
                <!-- Almost transparent overlay to capture mouse events -->
                <!-- Background must be non-Transparent for hit testing -->
                <Border x:Name="MouseCaptureOverlay"
                        Background="#01000000"
                        IsHitTestVisible="True"
                        MouseWheel="Overlay_MouseWheel"
                        MouseMove="Overlay_MouseMove"
                        MouseDown="Overlay_MouseDown"
                        MouseUp="Overlay_MouseUp" />
            </Grid>
        </Border>

        <!-- Bottom Controls -->
        <StackPanel Grid.Row="2" Margin="5">
            <StackPanel Orientation="Horizontal" Margin="0,5">
                <TextBlock Text="Zoom:" Width="60" VerticalAlignment="Center"/>
                <Slider x:Name="ZoomSlider" Minimum="0.125" Maximum="16" Value="1" Width="200"
                        ValueChanged="ZoomSlider_ValueChanged"/>
                <TextBlock x:Name="ZoomText" Width="60" Text="100%" Margin="5,0" VerticalAlignment="Center"/>
                <Button Content="Reset" Width="60" Margin="5,0" Click="ResetZoomButton_Click"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,5">
                <TextBlock Text="Mip Level:" Width="60" VerticalAlignment="Center"/>
                <Slider x:Name="MipSlider" Minimum="0" Maximum="0" Value="0" Width="200"
                        ValueChanged="MipSlider_ValueChanged" IsSnapToTickEnabled="True" TickFrequency="1"/>
                <TextBlock x:Name="MipText" Width="60" Text="Mip 0" Margin="5,0" VerticalAlignment="Center"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,5">
                <CheckBox x:Name="LinearFilterCheckBox" Content="Linear Filter" IsChecked="True"
                          Checked="FilterCheckBox_Changed" Unchecked="FilterCheckBox_Changed" Margin="5,0"/>
                <CheckBox x:Name="SrgbCheckBox" Content="sRGB" IsChecked="True"
                          Checked="SrgbCheckBox_Changed" Unchecked="SrgbCheckBox_Changed" Margin="20,0,5,0"/>
            </StackPanel>

            <TextBlock x:Name="InfoText" Margin="0,5" FontFamily="Consolas" FontSize="11"/>
        </StackPanel>
    </Grid>
</Window>
